<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DropTV</title>

    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#3A72C2" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-title" content="DropTV" />

    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans&display=swap" rel="stylesheet" />

    <style>
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        background: black;
        overflow: hidden;
        font-family: 'Josefin Sans', sans-serif;
      }

      /* Vídeo ocupando a tela toda (player nativo do browser/TV) */
      video#videoPlayer {
        width: 100%;
        height: 100%;
        border: none;
        background: black;
        object-fit: contain;
      }

      #overlay {
        position: fixed;
        inset: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        background: rgba(0,0,0,0.5);
        backdrop-filter: blur(8px);
        z-index: 999;
        transition: opacity 1s ease;
      }
      #overlay.fade-out {
        opacity: 0;
        pointer-events: none;
      }
      .loggo {
        max-width: 50%;
        opacity: 0.9;
      }

      #playOverlay {
        position: fixed;
        inset: 0;
        display: none; /* deixamos pronto caso queira usar depois */
        justify-content: center;
        align-items: center;
        background: rgba(0,0,0,0.6);
        backdrop-filter: blur(10px);
        z-index: 900;
        transition: opacity 0.3s ease;
      }
      #playOverlay button {
        background: rgba(255,255,255,0.2);
        border: 1px solid rgba(255,255,255,0.3);
        border-radius: 50%;
        width: 80px;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background 0.3s;
      }
      #playOverlay button:hover {
        background: rgba(255,255,255,0.3);
      }
      #playOverlay svg {
        width: 40px;
        height: 40px;
        stroke: white;
      }

      /* Painel de música responsivo */
      #dv-musiqid {
        position: fixed;
        top: 5%;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(25,25,25,0.65);
        border-radius: 16px;
        padding: 8px 12px;
        display: flex;
        align-items: center;
        gap: 10px;
        opacity: 0;
        transition: opacity 0.4s ease;
        backdrop-filter: blur(10px);
        max-width: 90vw;
        box-sizing: border-box;
        overflow: hidden;
        z-index: 10;
        pointer-events: none;
      }

      #dv-musiqid.show {
        opacity: 1;
        pointer-events: auto;
      }

      #dv-musiqid img {
        height: 42px;
        width: 42px;
        border-radius: 8px;
        flex-shrink: 0;
      }

      .trackname {
        color: white;
        font-size: 1rem;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        min-width: 0;
        flex: 1;
      }

      /* Contêiner para Chromecast / AirPlay flutuando no canto direito */
      #castControls {
        position: fixed;
        right: 3%;
        bottom: 8%;
        display: flex;
        flex-direction: column;
        gap: 10px;
        opacity: 0;
        transition: opacity 0.4s ease;
        z-index: 10;
      }

      #castControls.visible {
        opacity: 1;
      }

      .cast-btn {
        background: rgba(25,25,25,0.65);
        border: none;
        color: white;
        width: 48px;
        height: 48px;
        cursor: pointer;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(10px);
        transition: background 0.3s;
      }

      .cast-btn:hover {
        background: rgba(255,255,255,0.15);
      }

      .cast-btn svg {
        width: 28px;
        height: 28px;
      }
    </style>

    <!-- Chromecast sender API -->
    <script src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>
  </head>

  <body>
    <div id="overlay">
      <img src="droptv.svg" alt="Drop TV" class="loggo" />
    </div>

    <div id="playOverlay">
      <button id="startButton" aria-label="Tocar">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke-width="2" viewBox="0 0 24 24">
          <path stroke="white" stroke-linecap="round" stroke-linejoin="round"
                d="M14.752 11.168l-5.197-3.01A1 1 0 008 9.01v5.98a1 1 0 001.555.832l5.197-3.01a1 1 0 000-1.664z"/>
        </svg>
      </button>
    </div>

    <!-- Player principal: <video> HLS direto -->
    <video
      id="videoPlayer"
      src="https://droptv.com.br/play.m3u8"
      controls
      autoplay
      playsinline
      webkit-playsinline
      preload="auto"
    ></video>

    <!-- Painel de música -->
    <div id="dv-musiqid">
      <img id="cover" src="musique.png" alt="Capa" />
      <div class="trackname">
        <span id="artist">Artista</span> — <span id="title">Música</span>
      </div>
    </div>

    <!-- Chromecast / AirPlay -->
    <div id="castControls">
      <button class="cast-btn" id="castButton" title="Chromecast">
        <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="white" viewBox="0 0 24 24">
          <path d="M1,18v3h3A3,3,0,0,0,1,18Zm0-4v2a5,5,0,0,1,5,5h2A7,7,0,0,0,1,14ZM1,10v2a9,9,0,0,1,9,9h2A11,11,0,0,0,1,10ZM21,3H3A2,2,0,0,0,1,5v3H3V5H21V19H13v2h8a2,2,0,0,0,2-2V5A2,2,0,0,0,21,3Z"/>
      </svg>
      </button>

      <button class="cast-btn" id="airplayButton" title="AirPlay" style="display:none;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="white" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M6 22l6-6 6 6M2 4h20v12H2z"/>
        </svg>
      </button>
    </div>

    <script src="main.js"></script>
  </body>
</html>
